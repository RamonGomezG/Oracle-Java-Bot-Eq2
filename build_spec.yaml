version: 0.1 
component: build
timeoutInSeconds: 100
shell: bash

env:
  variables:
    JAVA_HOME: /usr/lib64/graalvm/graalvm22-ee-java17

  exportedVariables:
    - BuildServiceDemoVersion

steps:
  - type: Command
    name: "Install GraalVM Enterprise 22.x Native Image for Java17"
    command: yum -y install graalvm22-ee-17-native-image

  - type: Command
    name: "Set PATH Variable"
    command: export PATH=$JAVA_HOME/bin:$PATH

  - type: Command
    name: test01
    command: (echo $JAVA_HOME)

  - type: Command
    name: test02
    command: source MtdrSpring/env.sh

  - type: Command
    name: pwd
    command: pwd

  - type: Command
    name: cd backend
    command: cd backend

  - type: Command
    name: which
    command: which mvn

  - type: Command
    name: package
    command: mvn package

  - type: Command
    name: compile
    command: (source MtdrSpring/env.sh;cd backend; source build.sh)

  - type: Command
    name: test
    command: ls MtdrSpring/backend/

  - type: Command
    name: test2
    command: ls MtdrSpring